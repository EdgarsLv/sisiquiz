<div class="layout-topbar">
  <div class="layout-topbar-logo-container">
    <a class="layout-topbar-logo" routerLink="/" (click)="closeMenu()">
      <app-logo [size]="36" />

      <h3 class="font-semibold m-0!">SisiQuiz</h3>
    </a>
  </div>

  <div class="flex items-center ml-auto gap-x-2">
    <p-button
      (onClick)="toggleDarkMode()"
      [outlined]="true"
      severity="secondary"
      size="small"
      [icon]="isDark ? 'pi pi-moon' : 'pi pi-sun'"
    />

    <p-button
      [outlined]="true"
      severity="contrast"
      [icon]="menuOpen ? 'pi pi-times' : 'pi pi-bars'"
      (onClick)="toggleMenu()"
    />
  </div>
</div>

<div
  #menuOverlay
  class="fixed top-0 left-0 w-full h-full bg-[var(--surface-card)] flex items-center justify-center z-50 overflow-hidden"
  style="height: 100%; transform: scaleY(0); transform-origin: top; visibility: hidden"
>
  <div class="w-1/2 h-full hidden lg:flex items-center justify-center relative">
    @if (currentPreview()) {
    <img
      #previewImage
      class="absolute max-w-xs opacity-0 pointer-events-none transition-opacity duration-300"
      [src]="currentPreview()"
    />
    }
  </div>

  <div
    class="w-full lg:w-1/2 flex flex-col h-full items-center justify-between lg:border-l border-indigo-600"
  >
    <div></div>
    <nav
      (mouseleave)="hidePreview()"
      #menuLinks
      class="nav-items flex flex-col gap-4 text-5xl font-black uppercase"
    >
      <a
        routerLink="/"
        routerLinkActive="text-indigo-400"
        [routerLinkActiveOptions]="{ exact: true }"
        class="hover:text-indigo-400"
        (click)="closeMenu()"
        (mouseenter)="showPreview('assets/logo/mindmap.svg')"
        >{{ 'HOME' | translate }}</a
      >
      <a
        routerLink="profile"
        routerLinkActive="text-indigo-400"
        class="hover:text-indigo-400"
        (click)="closeMenu()"
        (mouseenter)="showPreview('assets/logo/account.svg')"
        >{{ 'PROFILE' | translate }}</a
      >
      <a
        routerLink="test-list"
        routerLinkActive="text-indigo-400"
        class="hover:text-indigo-400"
        (click)="closeMenu()"
        (mouseenter)="showPreview('assets/logo/online.svg')"
        >{{ 'TESTS' | translate }}</a
      >
      <a
        routerLink="results"
        routerLinkActive="text-indigo-400"
        class="hover:text-indigo-400"
        (click)="closeMenu()"
        (mouseenter)="showPreview('assets/logo/analysis.svg')"
        >{{ 'RESULTS' | translate }}</a
      >
      <a
        routerLink="statistics/iq"
        routerLinkActive="text-indigo-400"
        class="hover:text-indigo-400"
        (click)="closeMenu()"
        (mouseenter)="showPreview('assets/logo/statistics.svg')"
        >{{ 'STATISTICS' | translate }}</a
      >
    </nav>

    <div #authNav class="w-[90%]">
      <div class="border-b border-indigo-600 py-2">
        <span class="font-black tracking-wider cursor-pointer" (click)="switchLanguage('en')">
          EN
        </span>
        <span class="mx-1">/</span>
        <span
          class="font-bold tracking-wider text-gray-400 cursor-pointer"
          (click)="switchLanguage('lv')"
        >
          LV
        </span>
      </div>

      <div class="flex justify-end py-4">
        @if (authService.authUser()) {
        <a
          pRipple
          class="flex items-center font-semibold text-red-400 cursor-pointer hover:text-red-500"
          (click)="signOut()"
          (click)="closeMenu()"
        >
          <span class="pi pi-sign-out font-semibold!"></span>
          <span class="ml-3">SIGN OUT</span>
        </a>
        }@else {
        <a
          pRipple
          routerLink="login"
          class="flex items-center font-semibold text-green-400 cursor-pointer hover:text-green-500"
          (click)="closeMenu()"
        >
          <span class="pi pi-sign-in font-semibold!"></span>
          <span class="ml-2">SIGN IN</span>
        </a>
        }
      </div>
    </div>
  </div>
</div>
